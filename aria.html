<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ARIA Labels and Roles - Web Accessibility Workshop</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <a href="index.html" class="back-link">← Back to Home</a>
    <main>
      <h1> ARIA Labels and Roles</h1>
      <p>
        This exercise demonstrates the importance of ARIA live regions for
        dynamic content. Try using a screen reader with this sports score app:
      </p>

      <section class="exercise-content">
        <div class="scoreboard">
          <div class="scoreboard-header">
            <h2>Live Matches</h2>
            <div class="last-update">
              Last update: <span id="lastUpdateTime">Just now</span>
            </div>
          </div>
          <p class="hint">
            Note: Scores update every 15 seconds. Try following the updates with
            a screen reader!
          </p>

          <div class="match-container">
            <!-- Match 1 -->
            <div class="match">
              <div class="match-header">
                <span class="league">Premier League</span>
                <span class="match-time">72'</span>
              </div>
              <div class="teams">
                <div class="team">
                  <span class="team-name">Crystal Phoenixes</span>
                  <span class="score" id="team1-score" aria-label="Crystal Phoenixes score">2</span>
                </div>
                <div class="team">
                  <span class="team-name">Royal Lions FC</span>
                  <span class="score" id="team2-score" aria-label="Royal Lions FC score">1</span>
                </div>
              </div>
              <div class="match-status" id="match1-status">
                Latest: Goal! Crystal Phoenixes score in the 70th minute!
              </div>
            </div>

          <div class="instructions">
            <h3>Making this Accessible</h3>
            <p>
              This scoreboard updates automatically, but screen reader users
              won't know when updates occur. To fix this:
            </p>
            <ol>
              <li>
                Add appropriate <code>aria-live</code> regions to the score and
                status elements
              </li>
              <li>Consider which elements should be "polite" vs "assertive"</li>
              <li>Test with a screen reader to verify the experience</li>
            </ol>
            <p>
              <a href="aria-solution.html" class="solution-link">View Solution →</a>
            </p>
          </div>
        </div>
      </section>
    </main>

    <script>
      // Simulated match events
      const matchEvents = [
        {
          match: 1,
          events: [
            {
              time: "75'",
              status: 'Corner kick for Royal Lions FC',
              scores: [2, 1],
            },
            {
              time: "78'",
              status: 'Shot on goal by Crystal Phoenixes!',
              scores: [2, 1],
            },
            {
              time: "82'",
              status: 'GOAL! Royal Lions FC equalize!',
              scores: [2, 2],
            },
          ],
        },
      ];

      // Keep track of current event for each match
      const currentEvents = [0];

      // Update a specific match
      function updateMatch(matchIndex) {
        const match = matchEvents[matchIndex];
        const eventIndex = currentEvents[matchIndex];

        if (eventIndex >= match.events.length) return;

        const event = match.events[eventIndex];

        // Update time
        document.querySelector('.match-time').textContent = event.time;

        // Update status
        document.getElementById('match1-status').textContent =
          `Latest: ${event.status}`;

        // Update scores
        document.getElementById('team1-score').textContent = event.scores[0];
        document.getElementById('team2-score').textContent = event.scores[1];

        // Update last update time
        const now = new Date();
        const timeString = now.toLocaleTimeString([], {
          hour: '2-digit',
          minute: '2-digit',
          second: '2-digit',
        });
        document.getElementById('lastUpdateTime').textContent = timeString;

        currentEvents[matchIndex]++;
      }

      // Update match every 15 seconds
      setInterval(() => {
        const matchIndex = 0;
        updateMatch(matchIndex);
      }, 15000);

      // Initial last update time
      const now = new Date();
      document.getElementById('lastUpdateTime').textContent =
        now.toLocaleTimeString([], {
          hour: '2-digit',
          minute: '2-digit',
          second: '2-digit',
        });
    </script>
  </body>
</html>
